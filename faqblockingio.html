<!-- received="Thu Jan 23 11:01:39 1997 PST" -->
<!-- sent="Thu, 23 Jan 1997 11:02:57 -0800" -->
<!-- name="David Brown" -->
<!-- email="david.a.brown@Eng.Sun.COM" -->
<!-- subject="re: blocking threads on Solaris" -->
<!-- id="199701231902.LAA17404@monkey.eng.sun.com" -->
<!-- inreplyto="blocking threads on Solaris" -->
<!DOCTYPE html>
<title>advanced-java archive for 01/97: re: blocking threads on Solaris</title>
<h1>re: blocking threads on Solaris</h1>
David Brown (<i>david.a.brown@Eng.Sun.COM</i>)<br>
<i>Thu, 23 Jan 1997 11:02:57 -0800</i>
<p>
    <ul>
        <li> <b>Messages sorted by:</b> <a href="date.html#811">[ date ]</a><a href="index.html#811">[ thread ]</a><a
                href="subject.html#811">[ subject ]</a><a href="author.html#811">[ author ]</a>
            <!-- next="start" -->
        <li> <b>Next message:</b> <a href="0812.html">Matt R. MacKinnon: "re: blocking threads on Solaris"</a>
        <li> <b>Previous message:</b> <a href="0810.html">Randy Chapman: "re: blocking threads on Solaris"</a>
        <li> <b>Maybe in reply to:</b> <a href="0771.html">Matt R. MacKinnon: "blocking threads on Solaris"</a>
            <!-- nextthread="start" -->
        <li> <b>Next in thread:</b> <a href="0812.html">Matt R. MacKinnon: "re: blocking threads on Solaris"</a>
    </ul>
    <!-- body="start" -->
    <i>&gt; </i><br>
    <i>&gt; </i><br>
    <i>&gt; There are some certain bugs on the Solaris runtime (and the Liux runtime</i><br>
    <i>&gt; as well) that will cause the entire runtime to block on an IO. If it were</i><br>
    <i>&gt; to work correctly, only the calling thread would block.</i><br>
    <i>&gt; </i><br>
    <p>
        There is currently one bug in this area of green threads that we know about:<br>
        reading from standard input (System.in.read()) will indeed block all green<br>
        threads. The reason: green threads IO relies on making all fd's non-blocking,<br>
        and it seems that if the runtime exits while file descriptor 0 is O_NONBLOCK<br>
        the shell that exec'd the runtime dies (ugly). We're going to dork with this<br>
        for FCS still.<br>
        <p>
            That one known bug pointed out: was this what you were referring to, or are<br>
            their *other* bugs you've seen where the runtime blocks? With a reproducible<br>
            test case perhaps?<br>
            <p>
                -Dave Brown<br>
                <p>
                    <i>&gt; --randy</i><br>
                    <i>&gt; </i><br>
                    <i>&gt; On Wed, 22 Jan 1997, Robert Nicholson wrote:</i><br>
                    <i>&gt; </i><br>
                    <i>&gt; &gt; Correct me if I'm wrong but won't it only block all thread of the same or</i><br>
                    <i>&gt; &gt; lesser priority? Higher priority threads still get a crack? Unlike</i><br>
                    <i>&gt; &gt; WIN32 where is will timeslice b/w threads of the same and lesser priority?</i><br>
                    <i>&gt; &gt; </i><br>
                    <i>&gt; &gt; </i><br>
                    <i>&gt; &gt; On Wed, 22 Jan 1997, Matt R. MacKinnon wrote:</i><br>
                    <i>&gt; &gt; </i><br>
                    <i>&gt; &gt; &gt; </i><br>
                    <i>&gt; &gt; &gt; It is my understanding that a when a thread blocks</i><br>
                    <i>&gt; &gt; &gt; on I/O under Solaris, it blocks all threads, not</i><br>
                    <i>&gt; &gt; &gt; just the thread doing the I/O (JDK 1.0.2). </i><br>
                    <i>&gt; &gt; &gt; </i><br>
                    <i>&gt; &gt; &gt; Can someone confirm this for me? </i><br>
                    <i>&gt; &gt; &gt; If I'm correct, is there any work-around? </i><br>
                    <i>&gt; &gt; &gt; Is this fixed in 1.1 ?</i><br>
                    <i>&gt; &gt; &gt; </i><br>
                    <i>&gt; &gt; &gt; Thanks,</i><br>
                    <i>&gt; &gt; &gt; Matt</i><br>
                    <i>&gt; &gt; &gt; --------------------------------------------</i><br>
                    <i>&gt; &gt; &gt; Matthew R. MacKinnon matt@netsation.com</i><br>
                    <i>&gt; &gt; &gt; Netsation Corp. <a
                            href="http://www.netsation.com">http://www.netsation.com</a></i><br>
                    <i>&gt; &gt; &gt; [ for list faq/archive/add/deletes see <a
                            href="http://www.xcf.berkeley.edu/lists.html">http://www.xcf.berkeley.edu/lists.html</a>
                        ]</i><br>
                    <i>&gt; &gt; &gt; </i><br>
                    <i>&gt; &gt; </i><br>
                    <i>&gt; &gt; [ for list faq/archive/add/deletes see <a
                            href="http://www.xcf.berkeley.edu/lists.html">http://www.xcf.berkeley.edu/lists.html</a>
                        ]</i><br>
                    <i>&gt; &gt; </i><br>
                    <i>&gt; </i><br>
                    <i>&gt; [ for list faq/archive/add/deletes see <a
                            href="http://www.xcf.berkeley.edu/lists.html">http://www.xcf.berkeley.edu/lists.html</a>
                        ]</i><br>
                    <i>&gt; </i><br>
                    [ for list faq/archive/add/deletes see <a
                        href="http://www.xcf.berkeley.edu/lists.html">http://www.xcf.berkeley.edu/lists.html</a> ]<br>
                    <!-- body="end" -->
                    <p>
                        <ul>
                            <!-- next="start" -->
                            <li> <b>Next message:</b> <a href="0812.html">Matt R. MacKinnon: "re: blocking threads on
                                    Solaris"</a>
                            <li> <b>Previous message:</b> <a href="0810.html">Randy Chapman: "re: blocking threads on
                                    Solaris"</a>
                            <li> <b>Maybe in reply to:</b> <a href="0771.html">Matt R. MacKinnon: "blocking threads on
                                    Solaris"</a>
                                <!-- nextthread="start" -->
                            <li> <b>Next in thread:</b> <a href="0812.html">Matt R. MacKinnon: "re: blocking threads on
                                    Solaris"</a>
                        </ul>